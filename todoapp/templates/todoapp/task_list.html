{% extends "todoapp/main.html" %}
{% block title%}ToDo-Tasks{% endblock %}
{% block content %}
    <div class="header-bar">
        <h1>ToDo List App</h1>
        <div>
            <h2>Hello {{request.user|title}},</h1>
            <h3>You have {{count}} incomplete task{{ count|pluralize:"s"}}</h3>
        <div>
        {% if request.user.is_authenticated %}
            <a href="{% url 'logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'login' %}">Login</a>
        {% endif %}
    </div>

    <hr>
    
    <a href= "{% url 'task-create' %}">Add task</a>
    <br/><br/>
    <form method="GET">
        <input type="text" name="search-data" value="{{search_input}}" />
        <input type="submit" value="search"/>
    </form>
    <br/>
    {% if tasks %}
        <table>
            <tr colspan="8">
                <th style="text-align: center;">Tasks</th>
            </tr>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>Due Date</th>
                <th>Priority</th>
                <th>Category</th>
                <th>Status</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            {% for task in tasks%}
            <tr>
                <td>{{task.title}}</td>
                <td>{{task.description}}</td>
                <td>{{task.due_date}}</td>
                <td>{{task.priority}}</td>
                <td>{{task.category}}</td>
                <td>
                    {% if task.status == 'True' %}
                        Completed
                    {% else %}
                        Not Complete
                    {% endif %}
                </td>
                <td><a href="{% url 'task-update' task.id%}">Edit</a></td>
                <td><a href="{% url 'task-delete' task.id%}">Delete</a></td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <h3>No tasks yet!</h3>
    {% endif%}
        
{% endblock content %}
